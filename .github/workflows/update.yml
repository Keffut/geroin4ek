on:
  schedule:
    - cron: "0 0 * * *"
  workflow_dispatch:

jobs:
  d:
    runs-on: ubuntu-latest

    steps:
      - name: dd
        uses: actions/checkout@v3

      - name: gg
        run: |
          git config --global user.name "github-actions[bot]"
          git config --global user.email "github-actions[bot]@users.noreply.github.com"

      - name: ga
        run: |
          current_date=$(date +%s)
          current_day=$(date +%Y-%m-%d)
          echo "Current date: $current_day"

          awk -F ' ' -v current_day="$current_day" '
            {
              split($2, f, ".")
              line_date = f[3] "-" f[2] "-" f[1]
              if (line_date >= current_day) print $0
            }
          ' codes.txt > temp.txt && mv temp.txt codes.txt

      - name: tw
        run: |
          echo "$(date +%s)" | cat - codes.txt > temp.txt && mv temp.txt codes.txt

      - name: st
        run: |
          git add codes.txt
          git commit -m "Update" || echo "No changes"

      - name: jh
        run: git fetch --all

      - name: cx
        run: git push origin HEAD || git push origin HEAD --force
